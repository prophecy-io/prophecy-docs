---
title: Azure Synapse
description: Set up an Azure Synapse fabric
---

<Callout icon="/images/icon.png" color="#FFC107">
  Available for [Enterprise Edition](/data-engineering/administration/platform/editions) only.
</Callout>

In the context of Spark execution engines, users have the flexibility to opt for Azure Synapse Analytics while utilizing Prophecy. Use this step-by-step guide on creating a fabric to connect to the Azure Synapse Workspace via Livy.

Feel free to explore the following sections to gain insights into the integration of Azure Synapse Analytics with Prophecy.

## An existing Azure Synapse Analytics environment

A properly configured Azure Synapse Analytics environment is required before configuring a Synapse fabric on Prophecy. Prophecy configurations include the following:

1. A Synapse workspace with proper security configured. If you don't have an existing workspace, you may deploy one from the [Azure Marketplace](https://azuremarketplace.microsoft.com/en-us/marketplace/apps/microsoft.synapse?tab=overview).
   ![Synapse security](/data-engineering/fabrics/spark-provider/img/workspaceiam.png)

2. Deploy a Synapse Spark Pool if one doesn't already exist.
   ![Synapse pool](/data-engineering/fabrics/spark-provider/img/sparkpool.png)

3. Make sure the Application is registered.
   ![Synapse security](/data-engineering/fabrics/spark-provider/img/add_app.png)

4. Create a secret for your Application.
   ![Synapse security](/data-engineering/fabrics/spark-provider/img/secret.png)

5. Make a note of your secret. We need this information for your fabric.
   ![Synapse security](/data-engineering/fabrics/spark-provider/img/secret2.png)

6. Configure Application, Workspace, Storage roles to ensure proper access.

Find more information on assigning roles from [Azure's documentation](https://learn.microsoft.com/en-us/azure/synapse-analytics/security/how-to-set-up-access-control).

### Configure connectivity between Synapse and Prophecy

Note that the Prophecy public IP is `3.133.35.237`.

1. Navigate to Prophecy's UI and click on **Create Fabric**. The fabric will establish a connection with your Synapse environment and utilize it as the execution engine for your pipelines.
1. Choose **Synapse** as your **Provider**.

   ![Synapse connect](/data-engineering/fabrics/spark-provider/img/provider1.png)

1. Copy and paste your **Application Client ID**, **Secret Value**, and **Tenant ID** from the App Registration page.

   ![Synapse connect](/data-engineering/fabrics/spark-provider/img/appconfig.png)

1. Copy and paste your Synapse **Resource Group Name** and **Subscription ID** from your Synapse workspace.

   ![Synapse connect](/data-engineering/fabrics/spark-provider/img/workspaceconfig.png)

1. Click on **Fetch environments**.
1. Select your Spark pool from the _Spark environment_ dropdown. All other fields should be automatically populated after selecting your Spark Pool.

   ![Synapse connect](/data-engineering/fabrics/spark-provider/img/selectsparkpool.png)

1. Click on **Add Job Size** and configure the Job size that you would like to use for processing.

   ![Synapse connect](/data-engineering/fabrics/spark-provider/img/addjsize.png)

Now we configure the dependencies.

1. Under **Scala** enter the following **Path**:

   `https://prophecypublicazure.blob.core.windows.net/prophecy-public-libs/prophecy-scala-libs/`

1. Under **Python** enter the following **Path**:

   `https://prophecypublicazure.blob.core.windows.net/prophecy-public-libs/prophecy-python-libs/`

1. Click on **Complete**.

Your fabric for Azure Synapase fabric is configured! Try creating a cluster using the fabric that you've just created and attach to it.

Run a simple pipeline and make sure that the interim returns data properly.
