---
title: 'Deploy project'
---

Deploy projects with custom pipeline and project configurations to specific fabrics. Use this API to automate project deployment with external CI/CD tools or deploy the same project to different environments with different configuration values.

## Requirements

To run the API, you need to:

- Reference a fabric that exists in your environment.
- Use an existing Git tag that defines the project version.

<Note>
Unlike in the Prophecy UI where Git tags are created automatically during publish, when using this API you must create the Git tag externally. 

The tag must follow the exact format `{projectName}/{version}`.
</Note>

## Endpoint

```
https://app.prophecy.io/api/deploy/project
```

<Info>
Replace the base URL with your environment URL for Dedicated SaaS deployments.
</Info>

## Headers

---

<ResponseField name="X-AUTH-TOKEN" type="string" required>
  Prophecy access token.
</ResponseField>

## Body Parameters

---

<ResponseField name="projectName" type="string" required>
  Name of the project to be deployed.
  
  Example: `CustomerAnalytics`
</ResponseField>

<ResponseField name="fabricName" type="string" required>
  Name of the fabric where the project will be deployed.
  
  Example: `production-databricks`
</ResponseField>

<ResponseField name="gitTag" type="string" required>
  Git tag identifying the specific version of the project to deploy. Must follow the format `{projectName}/{version}`.
  
  Example: `CustomerAnalytics/2.1`
</ResponseField>

<ResponseField name="pipelineConfigurations" type="JSON">
  Override default values for specific pipeline parameters. Each pipeline can have multiple parameter overrides. The parameter must exist in the pipeline definition, or the override will be skipped.
  
  Example: `{"sales_report": {"report_period": "monthly"}}`
</ResponseField>

<ResponseField name="projectConfiguration" type="JSON">
  Override default values for project-level configuration parameters that apply to all pipelines in the project.
  
  Example: `{"environment": "production"}`
</ResponseField>

## Pipeline Configurations Structure

The `pipelineConfigurations` parameter allows you to specify pipeline parameter values for individual pipelines within the project. The structure is:

```json
{
  "pipelineName": {
    "parameterName": "parameterValue",
    "anotherParameter": "anotherValue"
  }
}
```

- `pipelineName` is the name of a pipeline within the project
- `parameterName` is the name of a pipeline parameter
- `parameterValue` is the value to assign to that parameter

<Info>
You only need to specify the parameters you want to override. Any parameters not specified will use their default values from the pipeline definition. You can override just one parameter or multiple parameters as needed.
</Info>

## Project Configuration Structure

The `projectConfiguration` parameter allows you to specify configuration values that apply to the entire project. The structure is:

```json
{
  "parameterName": "parameterValue",
  "anotherParameter": "anotherValue"
}
```

- `parameterName` is the project configuration variable name
- `parameterValue` is the value to assign to that variable

<Info>
Project configuration parameters serve as global values for all pipelines in the project. Individual pipelines can override these values by defining parameters with the same name in their pipeline-specific configuration.
</Info>

### Configuration Parameter Precedence

Configuration parameters follow this precedence order:

1. Pipeline parameter overrides (highest priority)
2. Project configuration overrides
3. Default pipeline parameters
4. Default project configuration (lowest priority)

## Response

---

<ResponseField name="success" type="boolean">
  Indicates whether the request to deploy the project was successful.
</ResponseField>

<ResponseField name="message" type="string">
  Message that explains the outcome of the request.
</ResponseField>

<ResponseField name="deploymentId" type="string">
  Unique identifier of the deployment generated by this request.
</ResponseField>

<ResponseField name="details" type="object">
  Object containing detailed information about the deployment.
</ResponseField>

<ResponseField name="error" type="string">
  Detailed error information provided when the request fails.
</ResponseField>

### Deployment Details Structure

The `details` object contains the following fields:

<ResponseField name="projectId" type="string">
  Unique identifier of the deployed project.
</ResponseField>

<ResponseField name="fabricId" type="string">
  Unique identifier of the fabric where the project was deployed.
</ResponseField>

<ResponseField name="version" type="string">
  Version number of the deployed project.
</ResponseField>

<ResponseField name="pipelinesDeployed" type="array">
  Array of pipeline names that were successfully deployed.
</ResponseField>

<ResponseField name="configurationsApplied" type="number">
  Number of configuration parameters that were applied during deployment.
</ResponseField>

<RequestExample>

```bash Request
# Deploy a project called CustomerAnalytics to the production-databricks fabric with specific pipeline and project configurations.

curl --location 'https://app.prophecy.io/api/deploy/project' \
--header 'X-AUTH-TOKEN: <prophecy-pat>' \
--header 'Content-Type: application/json' \
--data '{
  "projectName": "CustomerAnalytics",
  "fabricName": "production-databricks",
  "gitTag": "CustomerAnalytics/2.1",
  "pipelineConfigurations": {
    "sales_report": {
      "report_period": "monthly",
      "include_forecasts": "true"
    },
    "customer_segmentation": {
      "segment_count": "5",
      "min_customers_per_segment": "100"
    },
    "revenue_analysis": {
      "currency": "USD",
      "include_tax": "false"
    }
  },
  "projectConfiguration": {
    "environment": "production",
    "data_refresh_frequency": "daily"
  }
}'
```

</RequestExample>

<ResponseExample>

```json Response
// Response to a successful deployment request.

{
  "success": true,
  "message": "Project scheduled successfully",
  "deploymentId": "212",
  "details": {
    "projectId": "67890",
    "fabricId": "09123",
    "version": "2.1",
    "pipelinesDeployed": [
      "sales_report",
      "customer_segmentation",
      "revenue_analysis"
    ],
    "configurationsApplied": 5
  }
}
```

</ResponseExample>

<ResponseExample>

```json Response
// Response to a request with an invalid Git tag.

{
  "success": false,
  "message": "Deployment failed",
  "error": "Failed to fetch project files: Clone failed because revision Some(CustomerAnalytics/2.1) was not found"
}
```

</ResponseExample>
